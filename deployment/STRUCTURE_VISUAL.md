# Visual Structure Comparison

## ğŸ”„ Development â†’ Production Mapping

### Development (Your Local Machine)
```
D:\My Files\Yarl IT Hub\Framio\
â”‚
â”œâ”€â”€ backend/                          â† Django Backend
â”‚   â”œâ”€â”€ frameio_backend/
â”‚   â”‚   â””â”€â”€ settings.py               â† Uses: BASE_DIR / 'staticfiles'
â”‚   â”œâ”€â”€ manage.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ gunicorn_config.py            â† âœ… NEW
â”‚   â”œâ”€â”€ staticfiles/                  â† Generated by collectstatic
â”‚   â”œâ”€â”€ media/                        â† User uploads
â”‚   â””â”€â”€ logs/
â”‚
â”œâ”€â”€ frontend/                         â† Next.js Frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ deployment/                        â† âœ… NEW - Deployment files
â”‚   â”œâ”€â”€ setup.sh
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â””â”€â”€ frameio-backend.service
â”‚
â”œâ”€â”€ nginx.conf                         â† âœ… UPDATED
â””â”€â”€ env.template                      â† âœ… UPDATED
```

### Production (AWS EC2)
```
/opt/frameio/                          â† Project root
â”‚
â”œâ”€â”€ venv/                             â† âœ… Created on EC2
â”‚   â””â”€â”€ bin/
â”‚       â”œâ”€â”€ python
â”‚       â”œâ”€â”€ pip
â”‚       â””â”€â”€ gunicorn                  â† Installed here
â”‚
â”œâ”€â”€ backend/                           â† âœ… SAME STRUCTURE
â”‚   â”œâ”€â”€ frameio_backend/
â”‚   â”‚   â””â”€â”€ settings.py               â† âœ… SAME - Works identically
â”‚   â”œâ”€â”€ manage.py                     â† âœ… SAME
â”‚   â”œâ”€â”€ requirements.txt              â† âœ… SAME
â”‚   â”œâ”€â”€ gunicorn_config.py            â† âœ… SAME
â”‚   â”œâ”€â”€ staticfiles/                  â† âœ… SAME - Nginx serves from here
â”‚   â”œâ”€â”€ media/                        â† âœ… SAME - Nginx serves from here
â”‚   â””â”€â”€ logs/                         â† âœ… SAME - Gunicorn logs here
â”‚
â”œâ”€â”€ frontend/                          â† âœ… SAME STRUCTURE
â”‚   â”œâ”€â”€ src/                          â† âœ… SAME
â”‚   â”œâ”€â”€ public/                       â† âœ… SAME
â”‚   â”œâ”€â”€ .next/                        â† Generated on build
â”‚   â””â”€â”€ package.json                  â† âœ… SAME
â”‚
â”œâ”€â”€ deployment/                        â† âœ… SAME
â”‚   â”œâ”€â”€ setup.sh                      â† âœ… SAME
â”‚   â”œâ”€â”€ deploy.sh                     â† âœ… SAME
â”‚   â””â”€â”€ frameio-backend.service       â† âœ… SAME
â”‚
â”œâ”€â”€ nginx.conf                         â† âœ… SAME (copied to /etc/nginx/)
â””â”€â”€ .env                               â† Production values
```

## ğŸ”— How Services Connect

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Internet Users                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ HTTP/HTTPS (Port 80/443)
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Nginx (Port 80)                       â”‚
â”‚  /etc/nginx/sites-available/frameio                     â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /static/ â†’ /opt/frameio/backend/staticfiles/   â”‚   â”‚
â”‚  â”‚  /media/  â†’ /opt/frameio/backend/media/          â”‚   â”‚
â”‚  â”‚  /api/    â†’ Proxy to Gunicorn                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ Proxy (127.0.0.1:8000)
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Gunicorn (Port 8000)                        â”‚
â”‚  /opt/frameio/venv/bin/gunicorn                         â”‚
â”‚  Config: /opt/frameio/backend/gunicorn_config.py        â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Django Application                               â”‚   â”‚
â”‚  â”‚  /opt/frameio/backend/                            â”‚   â”‚
â”‚  â”‚  WSGI: frameio_backend.wsgi:application          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ Database Connection
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MySQL                                â”‚
â”‚  Database: frameio_db                                   â”‚
â”‚  User: frameio_user                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ Path Resolution Examples

### Static Files
```
Development:
  settings.py: STATIC_ROOT = BASE_DIR / 'staticfiles'
  Result: D:\...\Framio\backend\staticfiles\

Production:
  settings.py: STATIC_ROOT = BASE_DIR / 'staticfiles'
  Result: /opt/frameio/backend/staticfiles/
  
Nginx serves from:
  /opt/frameio/backend/staticfiles/
  
âœ… Same relative path, different absolute path - Works perfectly!
```

### Media Files
```
Development:
  settings.py: MEDIA_ROOT = BASE_DIR / 'media'
  Result: D:\...\Framio\backend\media\

Production:
  settings.py: MEDIA_ROOT = BASE_DIR / 'media'
  Result: /opt/frameio/backend/media/
  
Nginx serves from:
  /opt/frameio/backend/media/
  
âœ… Same relative path, different absolute path - Works perfectly!
```

### Gunicorn Config
```
Development:
  Location: backend/gunicorn_config.py
  BASE_DIR = Path(__file__).resolve().parent
  Result: D:\...\Framio\backend\

Production:
  Location: /opt/frameio/backend/gunicorn_config.py
  BASE_DIR = Path(__file__).resolve().parent
  Result: /opt/frameio/backend/
  
âœ… Same relative path resolution - Works perfectly!
```

## âœ… Why This Works

1. **Relative Paths** - Django uses `BASE_DIR` which is relative to the settings file
2. **Same Structure** - Backend folder structure is identical
3. **Nginx Configuration** - Uses absolute paths that match the structure
4. **Systemd Service** - Points to the correct absolute paths
5. **No Code Changes** - All paths resolve correctly automatically

## ğŸ¯ Key Takeaway

**Your structure doesn't need to change because:**

- âœ… Django's `BASE_DIR` automatically resolves correctly
- âœ… Nginx uses absolute paths that we configure
- âœ… Gunicorn runs from the backend directory
- âœ… All relative imports work the same
- âœ… Static/media file paths are consistent

**The only difference is the root directory:**
- Development: `D:\My Files\Yarl IT Hub\Framio\`
- Production: `/opt/frameio/`

**Everything else stays exactly the same!** ğŸ‰

